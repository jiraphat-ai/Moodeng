@{
    ViewBag.Title = "เพิ่มสินค้าใหม่";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h2 class="text-2xl font-bold">เพิ่มสินค้าใหม่</h2>
                </div>
                <div class="card-body">
                    <form id="createStockForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">ชื่อสินค้า</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="costPerUnit" class="form-label">ราคาทุนต่อหน่วย</label>
                                <input type="number" class="form-control" id="costPerUnit" name="costPerUnit" min="0" step="0.01" required>
                            </div>
                            <div class="col-md-6">
                                <label for="sellPerUnit" class="form-label">ราคาขายต่อหน่วย</label>
                                <input type="number" class="form-control" id="sellPerUnit" name="sellPerUnit" min="0" step="0.01" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quantity" class="form-label">จำนวน</label>
                                <input type="number" class="form-control" id="quantity" name="quantity" min="0" required>
                            </div>
                            <div class="col-md-6">
                                <label for="reorderLevel" class="form-label">ระดับการสั่งซื้อใหม่</label>
                                <input type="number" class="form-control" id="reorderLevel" name="reorderLevel" min="0" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="category" class="form-label">หมวดหมู่</label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="">เลือกหมวดหมู่</option>
                                <option value="อาหาร">อาหาร</option>
                                <option value="เครื่องดื่ม">เครื่องดื่ม</option>
                                <option value="ขนม">ขนม</option>
                                <option value="อื่นๆ">อื่นๆ</option>
                            </select>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="@Url.Action("Index")" class="btn btn-secondary">ย้อนกลับ</a>
                            <button type="submit" class="btn btn-primary">บันทึก</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('#createStockForm').submit(function(e) {
                e.preventDefault();
                
                const formData = {
                    name: $('#name').val(),
                    costPerUnit: parseFloat($('#costPerUnit').val()),
                    sellPerUnit: parseFloat($('#sellPerUnit').val()),
                    quantity: parseInt($('#quantity').val()),
                    category: $('#category').val(),
                    reorderLevel: parseInt($('#reorderLevel').val()),
                    statusStock: parseInt($('#quantity').val()) > 0 ? "IN STOCK" : "OUT OF STOCK"
                };

                // TODO: ส่งข้อมูลไปยัง backend
                console.log('ข้อมูลที่จะส่ง:', formData);
                
                // แสดง alert แจ้งเตือนชั่วคราว (ในที่นี้เป็นตัวอย่าง)
                alert('บันทึกข้อมูลเรียบร้อยแล้ว');
                
                // กลับไปยังหน้า Index
                window.location.href = '@Url.Action("Index")';
            });
        });
    </script>
}

